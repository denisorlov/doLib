<html><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><title>Разработки на JavaScript</title>    <script type="text/javascript" src="lib/do.common.js"></script>    <script type="text/javascript" src="lib/do.elementUtils.js"></script>    <script type="text/javascript" src="lib/do.eventUtils.js"></script>    <script type="text/javascript" src="lib/do.resizer.js"></script>    <script type="text/javascript" src="lib/do.dragger.js"></script>    <script type="text/javascript" src="lib/do.table.js"></script>    <!-- no needs -->    <script type="text/javascript" src="lib/do.loader.js"></script><style>    /* standard table style */    table {        border-collapse: collapse;        border-spacing: 0;    }    tr.even{        background-color: floralwhite;    }    td, th {        border: solid 1px gray;    }    td {        text-align: right;    }    /* doTable */    th.doTableDragThTarget{        background-color: #d5ffd7;    }    th.doTableDragThNoTarget{        background-color: #fff5f5;    }    th.doTableDragThSource{        opacity: 0.3;    }    tr.doTableClickedRow{        background-color: #d6e4e6;    }    th.doTableClickedCol{        background-color: #d6e4e6;    }    .doTableShield{        position: absolute;        top: 0;        left: 0;        width: 100%;        height: 100%;        background-color: white;        opacity: .5;    }    .doTablePlate{        position: absolute;        top: 30%;        left: 30%;        background-color: floralwhite;        border: dotted 1px brown;        padding: 3px;    }    .doTableCell{    }    /* doDragger  doTableCell */    .doDraggerClone .doTableCell{        background-color: #d6e4e6;        opacity: 0.8;    }    /* doResizer */    .doResizable{        border-right: double 3px #BCBCBC;        box-sizing: border-box;    }</style></head><body><div id="content"><textarea id="code" style="width:100%;" rows="10">    var colCnt = 6, j,        myBigSourceArray = [];    for (var i = 0; i<10520; i++) {        for(var arr=[], j = 0; j<colCnt; j++){            var content = j==0?(i+1):(i+1)+' '+(j+1);            arr.push(content);        }        myBigSourceArray.push(arr);    }    // опции компонента "таблица", см. описание    var tableOptions = new $do.table.Options({        fetchSize: 1000,// default = 25        onRowDblClick: function(tr){// обработчик дв. клика, например для редактирвания данных строки            console.log("dblClick on row "+this.getSelectedRow().cells[0].textContent);        },        onScrollH: function(value){ this.plateToggle('строка '+value) },        onScrollHMouseUp: function(value){ this.plateToggle()}    });    // опции ресайзера(растягивателя) заголовков, см. описание    tableOptions.thResizerOptions = new $do.resizer.Options({        resizeY: false,// только по оси X        leftHandleW: 10,// "ручка слева"        // event методы, для теста        onMouseDown: function(event, element){console.log("onMouseDown resize")},        onStart: function(event, element){console.log("onStart resize")},        onResize: function(event, element){console.log("onResize")},        onEnd: function(event, element){console.log("onEnd resize")}    });    // опции драггера(таскателя) заголовков, см. описание    tableOptions.thDraggerOptions = new $do.dragger.Options({        dragY: false,// только по оси X        leftNoHandleW: 15,// "НЕручка слева", чтобы не спорить с ресайзером        bottomNoHandleH:0,        // event методы, для теста        onMouseDown: function(event, element){console.log("onMouseDown drag");},        onStart: function(event, element){console.log("onStart drag");},        onDrag: function(event, element){console.log("onDrag")},        onEnd: function(event, element){console.log("onEnd drag");}    });    // создаем компонент "таблица"    //var // сделаю s глобальной для доступа из консоли, для тестов        s = new $do.table.Object('someTable', tableOptions);    s.setColumnWidth(0, 50);// ширины колонок, default = 100(px)    s.setColumnWidth(2, 500);    //s.fetchSize = 1000;// можно и так проставить опции    // необходимо определить методы getAndOutData и createRowsArray, см. описание в do.table    s.getAndOutData = function(firstRow, lastRow){        //s.clearTBodies(); // можно очистить тело таблицы        s.shieldToggle(true);// ставим защитный "щит"        s.plateToggle('получение и вывод данных...');// выводим плашку        setTimeout(// через setTimeout и замыкание имитируем задержку получения данных            (function(doTable, firstRow, lastRow){                return function(){                    console.log('getAndOutData:'+firstRow+' '+lastRow);                    // slice( start[, end] ): start - from 0; end - doesn't include end                    var data = myBigSourceArray.slice(firstRow-1, lastRow);                    doTable.setTotalRowCount(myBigSourceArray.length);                    doTable.outRows(data);                    s.shieldToggle();// снимаем "щит"                    s.plateToggle();//  снимаем плашку                }            }(this, firstRow, lastRow)),        3000);// setTimeout    };    s.createRowsArray = function(data){        var i, j, arr=[];        for(i in data){            var tr = document.createElement('TR');            i%2!=0?tr.classList.add('even'):0;            tr.style.height = (i%3)*20+'px';// разная высота строк, для теста скролла            for(j in data[i]){                // createCell(ind, content): <td><div>[content]</div></td>                var cell = s.createCell(data[i][j]);                tr.appendChild(cell);            }            arr.push(tr);        }        return arr;    }    s.init();    /** Заголовки */    s.clearTHead();    var tr = document.createElement('TR'),        cell1 = s.createCellTH('', false),        cell3 = s.createCellTH('Объединяющий 3 колонки', 3),// content, group id        cell2 = s.createCellTH('Объединяющий 2 колонки', 2);    cell3.setAttribute('colspan', 3);    cell2.setAttribute('colspan', 2);    tr.appendChild(cell1);    tr.appendChild(cell3);    tr.appendChild(cell2);    s.headAppendRow(tr, false);// добавление строки заголовка без привязки к колонкам таблицы    tr = document.createElement('TR');    for(var arr=[], j = 0; j<colCnt; j++){        var cell = s.createCellTH(            'Заголовок '+(j+1), // content            j in {1:0,2:0,3:0}? 3 : j in {4:0,5:0}? 2 : null ,//group id            j>0?true:false, // resize            j>0?true:false // drag        );        tr.appendChild(cell);    }    s.headAppendRow(tr, true);// добавление строки заголовка с привязкой к колонкам таблицы</textarea><input id="exec" type="button" value="Выполнить" onclick="eval(this.previousSibling.value)"><!--div id="outer" style="overflow-x: auto;overflow-y: hidden;height: 240px;/*height: 120px;*/border:solid 1px gray;position: relative;">    <table>        <tr>            <th><div style="width:300px">Заголовок1</div></th>            <th><div style="width:200px">Заголовок2</div></th>            <th><div style="width:500px">Заголовок3</div></th>            <th><div style="width:100px">Заголовок4</div></th>        </tr>    </table>    <div style="overflow: hidden;width:/*tableW+scrollBarW*/1130px">        <table style="box-sizing: border-box;/*scroll: */margin-top:-10px;">            <tr>                <td><div style="width:300px">1</div></td>                <td><div style="width:200px">&nbsp;</div></td>                <td><div style="width:500px">&nbsp;</div></td>                <td><div style="width:100px">&nbsp;</div></td>            </tr>            <script>                for(i=0;i<6;i++)                    document.writeln('<tr>'+                            '<td>'+(i+2)+'</td>'+                            '<td>&nbsp;</td>'+                            '<td>&nbsp;</td>'+                            '<td>&nbsp;</td>'+                    '</tr>');            </script>        </table>    </div>    <div id="scrollBarDiv" style="width: 17px;height: 223px;/*height: 103px;*/ overflow-x: hidden;overflow-y: auto;position: absolute;right: 0;top: 0;">        <div id="someTable_scrollDiv" style="width: 1px; height: 1000px;"></div>    </div></div><script>    outer.onscroll = function(){        scrollBarDiv.style.right = -this.scrollLeft+'px';    }</script--><table id="someTable"></table></div><script></script></body></html>